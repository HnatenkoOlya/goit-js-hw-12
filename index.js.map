{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = \"48999193-84142b43a51cfa1138f8dc0d5\";\nconst BASE_URL = \"https://pixabay.com/api/\";\n\nexport async function fetchImages(query, page) {\n    try {\n        const response = await axios.get(BASE_URL, {\n            params: {\n                key: API_KEY,\n                q: query,\n                image_type: \"photo\",\n                orientation: \"horizontal\",\n                safesearch: true,\n                per_page: 40,\n                page: page,\n            }\n        });\n        return response.data;\n    } catch (error) {\n        console.error(\"Error while searching for images\", error);\n        return  { hits: [], totalHits: 0 };\n    }\n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst gallery = document.querySelector(\".gallery\");\n\nexport function renderImages(images, append = false) {\n  if (!append) {\n    gallery.innerHTML = \"\";\n}\n    const imagesMarkup = images \n     .map(({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n     }) => `<li class=\"gallery-item\">\n            <a href=\"${largeImageURL}\" class=\"gallery-link\">\n             <img src=\"${webformatURL}\" class=\"gallery-img\" alt=\"${tags}\"/>\n              <div class=\"img-info\">\n              <p>Likes: ${likes}</p>\n              <p>Views: ${views}</p>\n              <p>Comments: ${comments}</p>\n              <p>Downloads: ${downloads}</p>\n              </div>\n            </a>\n           </li>`)\n     .join(\"\");\n     gallery.insertAdjacentHTML(\"beforeend\", imagesMarkup);\n     \n     const lightbox = new SimpleLightbox('.gallery a', {\n      captionsData: 'alt',\n      captionPosition: 'bottom',\n      captionDelay: 250,\n    });\n    lightbox.refresh();\n}\n ","import {fetchImages} from \"./js/pixabay-api\"\nimport {renderImages} from \"./js/render-functions\"\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst form = document.querySelector(\".form\");\nconst input = document.querySelector(\".input\");\nconst loader = document.querySelector(\".loading\");\nconst gallery = document.querySelector(\".gallery\");\nconst btnLoad = document.querySelector(\".load-btn\")\n\nlet query = \"\";\nlet page = 1;\nlet totalHits = 0;\n\nform.addEventListener(\"submit\", async (event) => {\n    event.preventDefault();\n    query = input.value.trim();\n    if (query === \"\") {\n        iziToast.warning({\n            message: 'Please enter a keyword to search',\n        });\n        return;\n    }\n    gallery.innerHTML = \"\";\n    page = 1;\n    btnLoad.style.display = \"none\";\n    loader.style.display = \"block\";\n    console.log(\"Loader on\");\n\n    try {\n        const response = await fetchImages(query, page);\n        totalHits = response.totalHits;\n        const images = response.hits;\n       if (images.length === 0) {\n        iziToast.error({\n            message: 'Sorry, there are no images matching your search query. Please try again!',\n        });\n        return;\n       } \n       renderImages(images);\n       if (page * 40 < totalHits) {\n        btnLoad.style.display = \"block\";\n    }\n    } catch (error) {\n        iziToast.error({\n            message: 'Something went wrong. Please try again later.',\n          });\n       } finally {\n        loader.style.display = \"none\"; \n        console.log(\"Loader off\");\n    }\n})\nbtnLoad.addEventListener(\"click\", async () => {\n    page += 1;\n    loader.style.display = \"block\";\n    console.log(\"Loader on\");\n    try {\n        const response = await fetchImages(query, page);\n        const images = response.hits;\n        if (images.length === 0) {\n            btnLoad.style.display = \"none\";\n            return;\n          }\n\n          renderImages(images, true);\n          const galleryItem = gallery.querySelector('.gallery-item');\n    const itemHeight = galleryItem.getBoundingClientRect().height;\n\n    window.scrollBy({\n        top: itemHeight * 2,\n        behavior: 'smooth',\n    });\n\n          if ((page - 1) * 40 + images.length >= totalHits) {\n            btnLoad.style.display = \"none\";\n            iziToast.info({\n                message: 'We are sorry, but you have reached the end of search results.',\n            });\n        }\n    } catch (error) {\n        iziToast.error({\n            message: 'Something went wrong. Please try again later.',\n        });\n    } finally {\n        loader.style.display = \"none\";\n        console.log(\"Loader off\");\n    }\n})"],"names":["API_KEY","BASE_URL","fetchImages","query","page","axios","error","gallery","renderImages","images","append","imagesMarkup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox","form","input","loader","btnLoad","totalHits","event","iziToast","response","itemHeight"],"mappings":"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"}